# Ozon Seller API - –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫–ª–∞–¥–∞ –∏ –∑–æ–Ω –¥–æ—Å—Ç–∞–≤–∫–∏ Express

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**–°–∫—Ä–∏–ø—Ç:** `create_warehouse_full_auto.js`

```javascript
// 1. –û—Ç–∫—Ä–æ–π—Ç–µ https://seller.ozon.ru/app/warehouse
// 2. –í—Å—Ç–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤ –∫–æ–Ω—Å–æ–ª—å (F12 ‚Üí Console)
// 3. –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ CONFIG:

const CONFIG = {
    companyId: 2722344,  // ‚Üê –í–∞—à ID –∫–æ–º–ø–∞–Ω–∏–∏
    warehouseAddress: "188490, –†–æ—Å—Å–∏—è, –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª, –ö–∏–Ω–≥–∏—Å–µ–ø–ø—Å–∫–∏–π —Ä-–Ω, –≥ –ò–≤–∞–Ω–≥–æ—Ä–æ–¥, —É–ª –ú–∞—Ç—Ä–æ—Å–æ–≤–∞, 2",
    deliveryTimeMinutes: 15,
    courierSpeedKmh: 30
};

// 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
createWarehouseFully()
```

**–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- üó∫Ô∏è –ì–µ–æ–∫–æ–¥–∏—Ä—É–µ—Ç –∞–¥—Ä–µ—Å ‚Üí –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- üè≠ –°–æ–∑–¥–∞–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫ —Å–∫–ª–∞–¥–∞
- üöö –°–æ–∑–¥–∞–µ—Ç –º–µ—Ç–æ–¥ –¥–æ—Å—Ç–∞–≤–∫–∏ Express
- üìç –°–æ–∑–¥–∞–µ—Ç –∑–æ–Ω—É + –ø–æ–ª–∏–≥–æ–Ω –¥–æ—Å—Ç–∞–≤–∫–∏ (–∫—Ä—É–≥ –ø–æ —Ä–∞–¥–∏—É—Å—É)
- üîó –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç—ã
- ‚úÖ –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–µ—Ç–æ–¥ –¥–æ—Å—Ç–∞–≤–∫–∏

---

## –û–±–∑–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ (8 —à–∞–≥–æ–≤)

| –®–∞–≥ | –î–µ–π—Å—Ç–≤–∏–µ | API |
|-----|----------|-----|
| 0 | –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ | `/api/site/address-service/v2/suggest` |
| 1 | –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ —Å–∫–ª–∞–¥–∞ | `/api/site/logistic-service/v3/warehouse/draft/create` |
| 2 | –°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ | `/api/delivery-method-service/delivery-method/create` |
| 3 | –°–æ–∑–¥–∞–Ω–∏–µ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏ | `/api/delivery-polygon-service/area/create` |
| 4 | –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–∏–≥–æ–Ω–∞ | `/api/delivery-polygon-service/v2/polygon/create` |
| 5 | –ü—Ä–∏–≤—è–∑–∫–∞ –ø–æ–ª–∏–≥–æ–Ω–∞ –∫ –∑–æ–Ω–µ | `/api/delivery-polygon-service/area/update` |
| 6 | –ü—Ä–∏–≤—è–∑–∫–∞ —Å–∫–ª–∞–¥–∞ | `/api/delivery-polygon-service/delivery-method/save/warehouse` |
| 7 | –ê–∫—Ç–∏–≤–∞—Ü–∏—è | `/api/delivery-method-service/delivery-method/activate` |

---

## 0. –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞

### GET `/api/site/address-service/v2/suggest`

–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∞–¥—Ä–µ—Å –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.

**URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```
?query=188490, –†–æ—Å—Å–∏—è, –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª...&country=RU&limit=1
```

**Response:**
```json
{
  "suggestions": [
    {
      "value": "188490, –†–æ—Å—Å–∏—è, –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª...",
      "geo": {
        "lat": 59.376881,
        "lon": 28.212974
      },
      "data": {
        "country": "–†–æ—Å—Å–∏—è",
        "region": "–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è",
        "city": "–ò–≤–∞–Ω–≥–æ—Ä–æ–¥",
        "street": "—É–ª –ú–∞—Ç—Ä–æ—Å–æ–≤–∞",
        "house": "2",
        "postal_code": "188490"
      }
    }
  ]
}
```

**Fallback:** OpenStreetMap Nominatim API
```
https://nominatim.openstreetmap.org/search?format=json&q={address}&limit=1
```

---

## 1. –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ —Å–∫–ª–∞–¥–∞

### POST `/api/site/logistic-service/v3/warehouse/draft/create`

–°–æ–∑–¥–∞–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫ —Å–∫–ª–∞–¥–∞ Express —Å –∞–¥—Ä–µ—Å–æ–º, –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º.

**Body:**
```json
{
  "company_id": 2722344,
  "name": "–°–µ–ª—å–ø–æ",
  "phone": "+7 966 879 96 66",
  "warehouse_type": "rfbs_express",
  "address": {
    "address": "–ü—Ä–∏–º–æ—Ä—Å–∫–∏–π –ö—Ä–∞–π, –≥–æ—Ä–æ–¥ –£—Å—Å—É—Ä–∏–π—Å–∫, –ö–æ–º—Å–æ–º–æ–ª—å—Å–∫–∞—è —É–ª–∏—Ü–∞, 30",
    "longitude": 131.944244,
    "latitude": 43.802948,
    "is_new_address_scheme": true,
    "is_house_missing": false,
    "country": "–†–æ—Å—Å–∏—è"
  },
  "timetable_template": {
    "holidays_override": [],
    "working_hours": {
      "1": {"from": "09:00", "to": "21:00"},
      "2": {"from": "09:00", "to": "21:00"},
      "3": {"from": "09:00", "to": "21:00"},
      "4": {"from": "09:00", "to": "21:00"},
      "5": {"from": "09:00", "to": "21:00"},
      "6": {"from": "09:00", "to": "21:00"},
      "7": {"from": "09:00", "to": "21:00"}
    }
  },
  "postings_limit": -1,
  "goods_by_request": false,
  "is_auto_assembly": false
}
```

**Response:**
```json
{
  "result": 4249339
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `company_id` | number | ID –∫–æ–º–ø–∞–Ω–∏–∏ |
| `name` | string | –ù–∞–∑–≤–∞–Ω–∏–µ —Å–∫–ª–∞–¥–∞ |
| `phone` | string | –¢–µ–ª–µ—Ñ–æ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ `+7 XXX XXX XX XX` |
| `warehouse_type` | string | `rfbs_express` –¥–ª—è Express |
| `address.address` | string | –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∞–¥—Ä–µ—Å |
| `address.latitude` | number | –®–∏—Ä–æ—Ç–∞ |
| `address.longitude` | number | –î–æ–ª–≥–æ—Ç–∞ |
| `timetable_template.working_hours` | object | –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ –¥–Ω—è–º (1=–ü–Ω...7=–í—Å) |
| `postings_limit` | number | –õ–∏–º–∏—Ç –∑–∞–∫–∞–∑–æ–≤ (-1 = –±–µ–∑ –ª–∏–º–∏—Ç–∞) |

---

## 2. –°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ Express

### POST `/api/delivery-method-service/delivery-method/create`

–°–æ–∑–¥–∞–µ—Ç –º–µ—Ç–æ–¥ –¥–æ—Å—Ç–∞–≤–∫–∏ Express, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π –∫ —á–µ—Ä–Ω–æ–≤–∏–∫—É —Å–∫–ª–∞–¥–∞.

**Body:**
```json
{
  "company_id": 2722344,
  "delivery_type_id": 1,
  "cutoff": "17:00",
  "name": "–≠–∫—Å–ø—Ä–µ—Å—Å. –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –°–µ–ª—å–ø–æ",
  "tariff_type": "STANDARD_OZON",
  "prr_setting": "",
  "tpl_integration_type": "non_integrated",
  "with_item_list": false,
  "make_method_group_id": false,
  "is_express": true,
  "sla_cut_in": 30,
  "courier_cutoff": 15,
  "working_days": [1, 2, 3, 4, 5, 6, 7],
  "warehouse_draft_id": 4249339
}
```

**Response:**
```json
{
  "result": {
    "id": 14650466,
    "warehouse_id": 0,
    "company_id": 2722344,
    "name": "–≠–∫—Å–ø—Ä–µ—Å—Å. –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –°–µ–ª—å–ø–æ",
    "delivery_type_id": 1,
    "status": "NEW",
    "is_express": false,
    "sla_cut_in": 30,
    "warehouse_draft_id": 4249339,
    "tpl_integration_type": "non_integrated",
    "tariff_type": "STANDARD_OZON"
  }
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `delivery_type_id` | number | `1` = —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ |
| `cutoff` | string | –ö—Ä–∞–π–Ω–µ–µ –≤—Ä–µ–º—è –ø—Ä–∏—ë–º–∞ –∑–∞–∫–∞–∑–æ–≤ |
| `tariff_type` | string | `STANDARD_OZON` |
| `tpl_integration_type` | string | `non_integrated` –¥–ª—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–π |
| `is_express` | boolean | `true` –¥–ª—è —ç–∫—Å–ø—Ä–µ—Å—Å-–¥–æ—Å—Ç–∞–≤–∫–∏ |
| `sla_cut_in` | number | –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –∑–∞–∫–∞–∑–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö |
| `courier_cutoff` | number | –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ –∫—É—Ä—å–µ—Ä–æ–º –≤ –º–∏–Ω—É—Ç–∞—Ö |
| `working_days` | array | –†–∞–±–æ—á–∏–µ –¥–Ω–∏ [1=–ü–Ω...7=–í—Å] |
| `warehouse_draft_id` | number | ID —á–µ—Ä–Ω–æ–≤–∏–∫–∞ —Å–∫–ª–∞–¥–∞ |

---

## 3. –°–æ–∑–¥–∞–Ω–∏–µ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏
      "country": "–†–æ—Å—Å–∏—è",
      "region": "–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è",
      "city": "–ò–≤–∞–Ω–≥–æ—Ä–æ–¥",
      "street": "—É–ª –ú–∞—Ç—Ä–æ—Å–æ–≤–∞",
      "house": "2",
      "zipcode": "188490",
      "latitude": 59.376881,
      "longitude": 28.212974,
      "address": "188490, –†–æ—Å—Å–∏—è, –õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª..."
    },
    "phone": "+7 999 123 45 67",
    "workingDays": [1, 2, 3, 4, 5, 6, 7],
    "warehouseType": "rfbs_express"
  }
}
```

**Response:**
```json
{
  "id": "4249339"  // ID —á–µ—Ä–Ω–æ–≤–∏–∫–∞ —Å–∫–ª–∞–¥–∞
}
```

---

## 2. –°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –¥–æ—Å—Ç–∞–≤–∫–∏

### POST `/api/delivery-method-service/delivery-method/create`

–°–æ–∑–¥–∞–µ—Ç –º–µ—Ç–æ–¥ –¥–æ—Å—Ç–∞–≤–∫–∏ Express –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞.

**Body:**
```json
{
  "company_id": 2722344,
  "warehouse_draft_id": 4249339,
  "delivery_type": "self",
  "is_express": true,
  "name": "–≠–∫—Å–ø—Ä–µ—Å—Å 15 –º–∏–Ω"
}
```

**Response:**
```json
{
  "id": 14650466  // ID –º–µ—Ç–æ–¥–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
}
```

---

## 3. –°–æ–∑–¥–∞–Ω–∏–µ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏ (Area)

### POST `/api/delivery-polygon-service/area/create`

–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –∑–æ–Ω—É –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–ª—è –º–µ—Ç–æ–¥–∞ –¥–æ—Å—Ç–∞–≤–∫–∏.

**Body:**
```json
{
  "area": {
    "delivery_method_id": "14650466",  // ID –º–µ—Ç–æ–¥–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ (—Å—Ç—Ä–æ–∫–∞)
    "delivery_time": "15",              // –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ –º–∏–Ω—É—Ç–∞—Ö (—Å—Ç—Ä–æ–∫–∞)
    "name": "–î–æ—Å—Ç–∞–≤–∫–∞ 15 –º–∏–Ω"           // –ù–∞–∑–≤–∞–Ω–∏–µ –∑–æ–Ω—ã
  }
}
```

**Response:**
```json
{
  "id": "957509"  // ID —Å–æ–∑–¥–∞–Ω–Ω–æ–π –∑–æ–Ω—ã
}
```

---

## 4. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–∏–≥–æ–Ω–∞ (Polygon)

### POST `/api/delivery-polygon-service/v2/polygon/create`

–°–æ–∑–¥–∞–µ—Ç –ø–æ–ª–∏–≥–æ–Ω —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ.

**Body:**
```json
{
  "coordinates": "[[[lat1,lng1],[lat2,lng2],[lat3,lng3],...,[lat1,lng1]]]"
}
```

**–§–æ—Ä–º–∞—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:**
- JSON-—Å—Ç—Ä–æ–∫–∞ —Å –º–∞—Å—Å–∏–≤–æ–º –º–∞—Å—Å–∏–≤–æ–≤
- –í–Ω–µ—à–Ω–∏–π –º–∞—Å—Å–∏–≤: `[[[...]]]` - multipolygon
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: `[—à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞]` (lat, lng) ‚Äî **—à–∏—Ä–æ—Ç–∞ –ø–µ—Ä–≤–∞—è!**
- –ü–æ–ª–∏–≥–æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–º–∫–Ω—É—Ç—ã–º (–ø–µ—Ä–≤–∞—è –∏ –ø–æ—Å–ª–µ–¥–Ω—è—è —Ç–æ—á–∫–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç)

### üîÑ –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä—É–≥–ª–æ–≥–æ –ø–æ–ª–∏–≥–æ–Ω–∞

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä—É–≥–ª—ã–π –ø–æ–ª–∏–≥–æ–Ω –ø–æ —Ñ–æ—Ä–º—É–ª–µ:

```javascript
// –†–∞—Å—á–µ—Ç —Ä–∞–¥–∏—É—Å–∞ –∏–∑ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
radius = (speedKmh * minutes / 60) * 0.7  // –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç 0.7 –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤

// –ü—Ä–∏–º–µ—Ä: 15 –º–∏–Ω @ 30 –∫–º/—á = 5.25 –∫–º

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 24 —Ç–æ—á–µ–∫ –ø–æ –∫—Ä—É–≥—É
for (i = 0; i <= 24; i++) {
    angle = (2 * PI * i) / 24;
    lat = centerLat + (radius/6371) * cos(angle) * (180/PI);
    lng = centerLng + (radius/6371) * sin(angle) * (180/PI) / cos(centerLat);
}
```

**Response:**
```json
{
  "success": true,
  "polygonId": "484317",  // ID —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª–∏–≥–æ–Ω–∞
  "hash": ""
}
```

---

## 5. –ü—Ä–∏–≤—è–∑–∫–∞ –ø–æ–ª–∏–≥–æ–Ω–∞ –∫ –∑–æ–Ω–µ

### POST `/api/delivery-polygon-service/area/update`

–ü—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø–æ–ª–∏–≥–æ–Ω –∫ –∑–æ–Ω–µ –¥–æ—Å—Ç–∞–≤–∫–∏.

**Body:**
```json
{
  "area": {
    "id": "957509",                      // ID –∑–æ–Ω—ã
    "name": "–î–æ—Å—Ç–∞–≤–∫–∞ 15 –º–∏–Ω",           // –ù–∞–∑–≤–∞–Ω–∏–µ –∑–æ–Ω—ã
    "delivery_time": "15",                // –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏
    "multi_polygon_ids": ["484317"]       // –ú–∞—Å—Å–∏–≤ ID –ø–æ–ª–∏–≥–æ–Ω–æ–≤
  }
}
```

**Response:**
```json
{
  "success": true
}
```

---

## 6. –ü—Ä–∏–≤—è–∑–∫–∞ —Å–∫–ª–∞–¥–∞ –∫ –º–µ—Ç–æ–¥—É –¥–æ—Å—Ç–∞–≤–∫–∏

### POST `/api/delivery-polygon-service/delivery-method/save/warehouse`

–ü—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç —Å–∫–ª–∞–¥ –∫ –º–µ—Ç–æ–¥—É –¥–æ—Å—Ç–∞–≤–∫–∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å–∫–ª–∞–¥–∞.

**Body:**
```json
{
  "delivery_method_id": 14650466,     // ID –º–µ—Ç–æ–¥–∞ (—á–∏—Å–ª–æ)
  "warehouse_id": "4249339",          // ID —á–µ—Ä–Ω–æ–≤–∏–∫–∞ —Å–∫–ª–∞–¥–∞ (—Å—Ç—Ä–æ–∫–∞)
  "warehouse_location": {
    "lat": 59.376881,                 // –®–∏—Ä–æ—Ç–∞ —Å–∫–ª–∞–¥–∞
    "long": 28.212974                 // –î–æ–ª–≥–æ—Ç–∞ —Å–∫–ª–∞–¥–∞
  }
}
```

**Response:**
```json
{
  "success": true
}
```

---

## 7. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤

### POST `/api/seller-returns-methods/v1/returns-setting`

–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –≤–æ–∑–≤—Ä–∞—Ç—É —Ç–æ–≤–∞—Ä–æ–≤.

**Body:**
```json
{
  "delivery_method_id": 14650466,
  "courier_instruction": {
    "comment": "",                    // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –∫—É—Ä—å–µ—Ä–∞
    "contact_days": 1,                // –î–Ω–µ–π –Ω–∞ —Å–≤—è–∑—å
    "used_warehouse_phone": true      // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω —Å–∫–ª–∞–¥–∞
  }
}
```

**Response:** –ø—É—Å—Ç–æ–π (status 200)

---

## 8. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –º–µ—Ç–æ–¥–∞ –¥–æ—Å—Ç–∞–≤–∫–∏

### POST `/api/delivery-method-service/delivery-method/activate`

–ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–µ—Ç–æ–¥ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ —Å–æ–∑–¥–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å–∫–ª–∞–¥.

**Body:**
```json
{
  "company_id": 2722344,              // ID –∫–æ–º–ø–∞–Ω–∏–∏
  "delivery_method_id": 14650466      // ID –º–µ—Ç–æ–¥–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
}
```

**Response:**
```json
{
  "result": true,
  "warehouse_id": 1020005003317990    // ID —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Å–∫–ª–∞–¥–∞ (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π!)
}
```

---

## –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ API

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–æ–Ω–∞—Ö

#### POST `/api/delivery-polygon-service/area/by-delivery-method`

```json
// Body:
{"delivery_method_id": 14650466}

// Response:
{
  "areas": [
    {
      "id": "957509",
      "name": "–û–±–ª–∞—Å—Ç—å 2",
      "deliveryMethodId": "14650466",
      "multiPolygonIds": ["484317"],
      "deliveryTime": "15"
    }
  ]
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–∏–≥–æ–Ω–æ–≤ –ø–æ ID

#### POST `/api/delivery-polygon-service/v2/polygon/by-ids`

```json
// Body:
{"ids": ["484317"]}

// Response:
{
  "polygons": [
    {
      "id": "484317",
      "coordinates": "[[[...–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã...]]]",
      "createdAt": "2025-12-25T20:01:32.851917Z",
      "updatedAt": "2025-12-25T20:01:32.851917Z",
      "isBase": false
    }
  ]
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–æ–¥–∞ –¥–æ—Å—Ç–∞–≤–∫–∏

#### GET `/api/delivery-polygon-service/delivery-method/check?id={id}`

```json
// Response:
{"isExist": true}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–µ—Ç–æ–¥–µ –¥–æ—Å—Ç–∞–≤–∫–∏

#### GET `/api/delivery-polygon-service/delivery-method/by-id?id={id}`

```json
// Response:
{
  "deliveryMethodInfo": {
    "id": 14650466,
    "isAggregator": false,
    "warehouseId": "4249339",
    "isActive": false,
    "warehousePolygonId": "484317",
    "type": "self",
    "selfMethodSpecial": {
      "selfRadius": 0,
      "techPolygonId": "0",
      "withNonBasePolygons": true
    }
  }
}
```

### –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—å–µ—Ä–æ–≤

#### POST `/api/delivery-method-service/v2/delivery-method/courier-schedule/get`

```json
// Body:
{
  "company_id": 2722344,
  "delivery_method_id": 14650466
}

// Response:
{
  "result": {
    "delivery_method_id": 14650466,
    "warehouse_id": 0,
    "company_id": 2722344,
    "working_days": [
      {"day": 1, "schedule": {"from": "09:00", "to": "21:00"}},
      {"day": 2, "schedule": {"from": "09:00", "to": "21:00"}},
      // ... –¥–Ω–∏ 3-7
    ],
    "is_same_as_warehouse": true
  }
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∫–ª–∞–¥–µ

#### POST `/api/site/logistic-service/facade/warehouse/get`

```json
// Body:
{
  "companyId": 2722344,
  "warehouseId": 1020005003317990
}

// Response:
{
  "result": {
    "warehouse": {
      "warehouseId": 1020005003317990,
      "companyId": 2722344,
      "name": "–°–µ–ª—å–ø–æ",
      "address": {
        "country": "–†–æ—Å—Å–∏—è",
        "region": "–ü—Ä–∏–º–æ—Ä—Å–∫–∏–π",
        "city": "–£—Å—Å—É—Ä–∏–π—Å–∫",
        "street": "–ö–æ–º—Å–æ–º–æ–ª—å—Å–∫–∞—è —É–ª–∏—Ü–∞",
        "house": "30",
        "zipcode": "692512",
        "latitude": 43.802949,
        "longitude": 131.944248,
        "utc": "UTC+10:00"
      },
      "status": "created",
      "workingDays": [1,2,3,4,5,6,7],
      "warehouseType": "rfbs_express",
      "phone": "+7 966 879 96 66"
    }
  }
}
```

### –°–ø–∏—Å–æ–∫ —Å–∫–ª–∞–¥–æ–≤

#### POST `/api/site/logistic-service/v5/facade/warehouse/list`

```json
// Body:
{
  "cursor": "",
  "companyId": 2722344,
  "search": "",
  "statusFilter": 1,
  "warehousesLimit": 50
}
```

---

## –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| `companyId` | 2722344 | ID –∫–æ–º–ø–∞–Ω–∏–∏ –ø—Ä–æ–¥–∞–≤—Ü–∞ |
| `warehouseType` | `rfbs_express` | –¢–∏–ø —Å–∫–ª–∞–¥–∞ Express |
| `delivery_type` | `self` | –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ |
| `deliveryTypeId` | 1 | ID —Ç–∏–ø–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ |

---

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

### –§–æ—Ä–º–∞—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø–æ–ª–∏–≥–æ–Ω–∞

–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:
- –í —Ñ–æ—Ä–º–∞—Ç–µ `[—à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞]` (–æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ - lat –ø–µ—Ä–≤—ã–π!)
- –ü–æ–ª–∏–≥–æ–Ω –∑–∞–º–∫–Ω—É—Ç—ã–π (–ø–µ—Ä–≤–∞—è —Ç–æ—á–∫–∞ = –ø–æ—Å–ª–µ–¥–Ω—è—è)
- –û–±–µ—Ä–Ω—É—Ç—ã –≤ —Ç—Ä–æ–π–Ω–æ–π –º–∞—Å—Å–∏–≤ `[[[...]]]`
- –ü–µ—Ä–µ–¥–∞–Ω—ã –∫–∞–∫ JSON-—Å—Ç—Ä–æ–∫–∞

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π

1. –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è **draft warehouse** (—á–µ—Ä–Ω–æ–≤–∏–∫ —Å–∫–ª–∞–¥–∞) —á–µ—Ä–µ–∑ UI –∏–ª–∏ API
2. –ó–∞—Ç–µ–º —Å–æ–∑–¥–∞–µ—Ç—Å—è **delivery method** (–º–µ—Ç–æ–¥ –¥–æ—Å—Ç–∞–≤–∫–∏) 
3. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å **area** (–∑–æ–Ω—É) –∏ **polygon** (–ø–æ–ª–∏–≥–æ–Ω)
4. –ü–æ–ª–∏–≥–æ–Ω –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫ –∑–æ–Ω–µ —á–µ—Ä–µ–∑ `area/update`
5. –°–∫–ª–∞–¥ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫ –º–µ—Ç–æ–¥—É —á–µ—Ä–µ–∑ `delivery-method/save/warehouse`
6. –ú–µ—Ç–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `delivery-method/activate`

### –¢–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç:
- `Content-Type: application/json`
- `Accept: application/json`
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: cookies (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ–π —Å–µ—Å—Å–∏–∏)

---

## –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–µ–∂–∏–º |
|------|----------|-------|
| `create_warehouse_full_auto.js` | **–ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** ‚Äî —É–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ ID –∏ –∞–¥—Ä–µ—Å | ü§ñ –ê–≤—Ç–æ |
| `create_warehouse_api.js` | –ü–æ—à–∞–≥–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç —Å —Ä—É—á–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º | üîß –†—É—á–Ω–æ–π |

### create_warehouse_full_auto.js

**–û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è:**
```javascript
createWarehouseFully()
```

**–ï—Å–ª–∏ —á–µ—Ä–Ω–æ–≤–∏–∫ —Å–æ–∑–¥–∞–Ω –≤—Ä—É—á–Ω—É—é:**
```javascript
continueFromDraft("warehouseDraftId")
continueFromDraft("draftId", "methodId")
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã CONFIG

```javascript
const CONFIG = {
    companyId: 2722344,                  // ID –∫–æ–º–ø–∞–Ω–∏–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
    warehouseAddress: "–ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å",    // –ê–¥—Ä–µ—Å —Å–∫–ª–∞–¥–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
    warehouseName: "",                   // –ê–≤—Ç–æ –∏–∑ –≥–æ—Ä–æ–¥–∞ –µ—Å–ª–∏ –ø—É—Å—Ç–æ
    warehousePhone: "",                  // –ê–≤—Ç–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –µ—Å–ª–∏ –ø—É—Å—Ç–æ
    deliveryTimeMinutes: 15,             // –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏
    courierSpeedKmh: 30,                 // –°–∫–æ—Ä–æ—Å—Ç—å –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞–¥–∏—É—Å–∞
    workingDays: [1,2,3,4,5,6,7],        // 1=–ü–Ω, 7=–í—Å
    workingHours: {from:"09:00", to:"21:00"}
};
```

---

## –§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞

### –†–∞–¥–∏—É—Å –¥–æ—Å—Ç–∞–≤–∫–∏ –∏–∑ –≤—Ä–µ–º–µ–Ω–∏

```
radius_km = (speed_kmh √ó minutes / 60) √ó 0.7
```

| –í—Ä–µ–º—è | –°–∫–æ—Ä–æ—Å—Ç—å | –†–∞–¥–∏—É—Å |
|-------|----------|--------|
| 15 –º–∏–Ω | 30 –∫–º/—á | ~5.25 –∫–º |
| 30 –º–∏–Ω | 30 –∫–º/—á | ~10.5 –∫–º |
| 60 –º–∏–Ω | 30 –∫–º/—á | ~21 –∫–º |

**–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç 0.7** ‚Äî –ø–æ–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (–Ω–µ –ø–æ –ø—Ä—è–º–æ–π).

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä—É–≥–ª–æ–≥–æ –ø–æ–ª–∏–≥–æ–Ω–∞

24 —Ç–æ—á–∫–∏ –ø–æ –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏ —Å —Ü–µ–Ω—Ç—Ä–æ–º –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö —Å–∫–ª–∞–¥–∞:
```
—Ç–æ—á–∫–∞[i] = —Ü–µ–Ω—Ç—Ä + —Ä–∞–¥–∏—É—Å √ó (cos Œ∏, sin Œ∏ / cos(lat))
–≥–¥–µ Œ∏ = 2œÄ √ó i / 24
```
